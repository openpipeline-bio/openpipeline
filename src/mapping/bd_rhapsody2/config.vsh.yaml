functionality:
  name: bd_rhapsody2
  namespace: mapping
  description: |
    BD Rhapsody Sequence Analysis CWL pipeline v2.2.1
    This pipeline performs analysis of single-cell multiomic sequence read (FASTQ) data. The supported
    sequencing libraries are those generated by the BD Rhapsodyâ„¢ assay kits, including: Whole Transcriptome
    mRNA, Targeted mRNA, AbSeq Antibody-Oligonucleotides, Single-Cell Multiplexing, TCR/BCR, and
    ATAC-Seq. The CWL pipeline file is obtained by cloning 'https://bitbucket.org/CRSwDev/cwl' and removing all objects with class 'DockerRequirement' from the YAML.

  resources:
    - type: python_script
      path: script.py

platforms:
  - type: docker
    image: bdgenomics/rhapsody:2.2.1
    setup:
      - type: apt
        packages: [procps]
      - type: python
        packages: [cwlref-runner, cwl-runner, ruamel.yaml, biopython, gffutils]
  - type: nextflow
    directives:
      label: [ highmem, highcpu ]

