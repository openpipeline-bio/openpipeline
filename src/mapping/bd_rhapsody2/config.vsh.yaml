functionality:
  name: "bd_rhapsody2"
  namespace: "mapping"
  description: |
    BD Rhapsody Sequence Analysis CWL pipeline v2.2.1
    
    This pipeline performs analysis of single-cell multiomic sequence read (FASTQ) data. The supported
    sequencing libraries are those generated by the BD Rhapsody assay kits, including: Whole Transcriptome
    mRNA, Targeted mRNA, AbSeq Antibody-Oligonucleotides, Single-Cell Multiplexing, TCR/BCR, and
    ATAC-Seq

    The CWL pipeline file is obtained by cloning 'https://bitbucket.org/CRSwDev/cwl' and removing all objects with class 'DockerRequirement' from the YAML.
  info:
    keywords: [rna-seq, single-cell, multiomic, atac-seq, targeted, abseq, tcr, bcr]
    links:
      repository: https://bitbucket.org/CRSwDev/cwl/src/master/v2.2.1
      documentation: https://bd-rhapsody-bioinfo-docs.genomics.bd.com
    license: Unknown
  authors:
    - __merge__: /src/authors/robrecht_cannoodt.yaml
      roles: [ author, maintainer ]
    - __merge__: /src/authors/weiwei_schultz.yaml
      roles: [ contributor ]

  argument_groups:
  - name: Inputs
    arguments:
      - name: "--reads"
        type: file
        description: |
          Reads (optional) - Path to your FASTQ.GZ formatted read files from libraries that may include:
          
          - WTA mRNA
          - Targeted mRNA
          - AbSeq
          - Sample Multiplexing
          - VDJ
          
          You may specify as many R1/R2 read pairs as you want.
        required: false
        multiple: true
        example:
          - WTALibrary_S1_L001_R1_001.fastq.gz
          - WTALibrary_S1_L001_R2_001.fastq.gz
        info:
          config_key: Reads
      - name: "--reads_atac"
        type: file
        description: |
          Path to your FASTQ.GZ formatted read files from ATAC-Seq libraries.
          You may specify as many R1/R2/I2 files as you want.
        required: false
        multiple: true
        example:
          - ATACLibrary_S2_L001_R1_001.fastq.gz
          - ATACLibrary_S2_L001_R2_001.fastq.gz
          - ATACLibrary_S2_L001_I2_001.fastq.gz
        info:
          config_key: Reads_ATAC

  resources:
    - type: python_script
      path: script.py
  test_resources:
    - type: python_script
      path: test.py

platforms:
  - type: docker
    image: ghcr.io/data-intuitive/bd_rhapsody:1.10.1
    setup:
      - type: python
        packages:
          - pandas<2
  - type: nextflow
    directives:
      label: [ highmem, highcpu ]
